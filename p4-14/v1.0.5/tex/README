############################################
## OVERVIEW

The spec is written in a mostly-LaTeX 'p4.pt' file, which is run through
a Python preprocessor to be turned into the final 'p4.tex' LaTeX code. This
code is then compiled by texi2pdf.

The purpose of the preprocessor is to:
    - collect BNF grammar fragments and reproduce them in one summary
      at the bottom of the document
    - automatically highlight BNF nonterminals
    - automatically scrape language keywords from the BNF and
      highlight them in P4 code snippets
You do not want to sink time into trying to do the above in pure LaTeX.
Multiple people have tried, all have failed, few escaped without damaging their
sanity.

############################################
## EDITING AND BUILDING THE SPEC

Edit 'p4.pt' - the 'p4.tex' file is autogenerated.
Run 'make'

Please try to keep lines in the source (p4.pt) less than 80 chars.
Don't use tab characters, use spaces instead.

When in doubt about how to do something in LaTeX, look for something in the
spec that does the same sort of thing and just copy that.

############################################
## LOOKING AT SPEC DIFFS

Changebars in LaTeX are difficult and don't play well with the code block
sections of the document (which includes the BNF). Because of this, it is
recommended you use a visual diff utility to compare the 'p4.pt' files from 
different spec versions.

'Meld' is a very nice open source diff utility, and comes highly recommended:
http://meldmerge.org/
It can be easily installed on Debian-based systems with apt-get:
sudo apt-get install meld

############################################
## PREREQUISITES AND DEPENDENCIES

Python 2.7 is used for the preprocessor.
Texinfo is used for compiling the LaTeX document. 

To install the LaTeX system:

# (on Ubuntu 14.04)
apt-get install texinfo
apt-get install okumura-clsfiles texlive-fonts-extra \
        texlive-latex-recommended texlive-latex-extra \
        texlive-fonts-recommended texlive-humanities 

# install font luximono
wget http://tug.org/fonts/getnonfreefonts/install-getnonfreefonts
sudo texlua install-getnonfreefonts
getnonfreefonts luximono

If you get an error message about a missing font (luximono) when building on
Ubuntu, you can install it like this:
  wget http://tug.org/fonts/getnonfreefonts/install-getnonfreefonts
  sudo texlua install-getnonfreefonts
  getnonfreefonts luximono

